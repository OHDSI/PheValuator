<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create the phenotype model for acute diseases — createAcutePhenotypeModel • PheValuator</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create the phenotype model for acute diseases — createAcutePhenotypeModel" />
<meta property="og:description" content="Create the phenotype model for acute diseases" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PheValuator</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/EvaluatingPhenotypeAlgorithms.html">EvaluatingPhenotypeAlgorithms</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/OHDSI/PheValuator/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create the phenotype model for acute diseases</h1>
    <small class="dont-index">Source: <a href='https://github.com/OHDSI/PheValuator/blob/master/R/CreateAcutePhenotypeModel.R'><code>R/CreateAcutePhenotypeModel.R</code></a></small>
    <div class="hidden name"><code>createAcutePhenotypeModel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create the phenotype model for acute diseases</p>
    </div>

    <pre class="usage"><span class='fu'>createAcutePhenotypeModel</span>(
  <span class='no'>connectionDetails</span>,
  <span class='no'>cdmDatabaseSchema</span>,
  <span class='kw'>databaseId</span> <span class='kw'>=</span> <span class='st'>"TestDB"</span>,
  <span class='no'>cohortDatabaseSchema</span>,
  <span class='no'>cohortTable</span>,
  <span class='no'>outDatabaseSchema</span>,
  <span class='kw'>modelOutputFileName</span> <span class='kw'>=</span> <span class='st'>"train"</span>,
  <span class='kw'>evaluationOutputFileName</span> <span class='kw'>=</span> <span class='st'>"eval"</span>,
  <span class='kw'>phenotypeEvaluationFileName</span> <span class='kw'>=</span> <span class='st'>"results"</span>,
  <span class='no'>xSpecCohortId</span>,
  <span class='no'>xSensCohortId</span>,
  <span class='no'>prevalenceCohortId</span>,
  <span class='kw'>excludedCovariateConceptIds</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(),
  <span class='kw'>includedCovariateIds</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(),
  <span class='kw'>addDescendantsToExclude</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>mainPopulationCohortId</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>mainPopulationCohortIdStartDay</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>mainPopulationCohortIdEndDay</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>baseSampleSize</span> <span class='kw'>=</span> <span class='fl'>2e+06</span>,
  <span class='kw'>lowerAgeLimit</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>upperAgeLimit</span> <span class='kw'>=</span> <span class='fl'>120</span>,
  <span class='kw'>startDays</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>endDays</span> <span class='kw'>=</span> <span class='fl'>7</span>,
  <span class='kw'>visitLength</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>gender</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>8507</span>, <span class='fl'>8532</span>),
  <span class='kw'>startDate</span> <span class='kw'>=</span> <span class='st'>"19000101"</span>,
  <span class='kw'>endDate</span> <span class='kw'>=</span> <span class='st'>"21000101"</span>,
  <span class='kw'>removeSubjectsWithFutureDates</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cdmVersion</span> <span class='kw'>=</span> <span class='st'>"5"</span>,
  <span class='kw'>outFolder</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span>(),
  <span class='kw'>excludeModelFromEvaluation</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>savePlpData</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>createModel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>createEvaluationCohort</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>cohortDefinitionsToTest</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>connectionDetails</th>
      <td><p>connectionDetails created using the function createConnectionDetails
in the DatabaseConnector package.</p></td>
    </tr>
    <tr>
      <th>cdmDatabaseSchema</th>
      <td><p>The name of the database schema that contains the OMOP CDM instance.
Requires read permissions to this database. On SQL Server, this should
specifiy both the database and the schema, so for example
'cdm_instance.dbo'.</p></td>
    </tr>
    <tr>
      <th>databaseId</th>
      <td><p>Short name for the database (default="TestDB")</p></td>
    </tr>
    <tr>
      <th>cohortDatabaseSchema</th>
      <td><p>The name of the database schema that is the location where the cohort
data used to define the at risk cohort is available. Requires read
permissions to this database.</p></td>
    </tr>
    <tr>
      <th>cohortTable</th>
      <td><p>The tablename that contains the at risk cohort. The expectation is
cohortTable has format of COHORT table: cohort_concept_id, SUBJECT_ID,
COHORT_START_DATE, COHORT_END_DATE.</p></td>
    </tr>
    <tr>
      <th>outDatabaseSchema</th>
      <td><p>The name of a database schema where the user has write capability.  A
temporary cohort table will be created here.</p></td>
    </tr>
    <tr>
      <th>modelOutputFileName</th>
      <td><p>A string designation for the training model file</p></td>
    </tr>
    <tr>
      <th>evaluationOutputFileName</th>
      <td><p>A string designation for the evaluation cohort file</p></td>
    </tr>
    <tr>
      <th>phenotypeEvaluationFileName</th>
      <td><p>A string designation for the .csv file with the results for the phenotype alogrithm evaluation</p></td>
    </tr>
    <tr>
      <th>xSpecCohortId</th>
      <td><p>The number of the "extremely specific (xSpec)" cohort definition id in
the cohort table (for noisy positives)</p></td>
    </tr>
    <tr>
      <th>xSensCohortId</th>
      <td><p>The number of the "extremely sensitive (xSens)" cohort definition id
in the cohort table (used to exclude subjects from the base population)</p></td>
    </tr>
    <tr>
      <th>prevalenceCohortId</th>
      <td><p>The number of the cohort definition id to determine the disease prevalence,
(default=xSensCohortId)</p></td>
    </tr>
    <tr>
      <th>excludedCovariateConceptIds</th>
      <td><p>A list of conceptIds to exclude from featureExtraction.  These should include all
concept_ids that were used to define the xSpec model (default=NULL)</p></td>
    </tr>
    <tr>
      <th>includedCovariateIds</th>
      <td><p>A list of covariate IDs that should be restricted to.</p></td>
    </tr>
    <tr>
      <th>addDescendantsToExclude</th>
      <td><p>Should descendants of excluded concepts also be excluded? (default=FALSE)</p></td>
    </tr>
    <tr>
      <th>mainPopulationCohortId</th>
      <td><p>The number of the cohort ID to be used as a base population for the model
(default=NULL)</p></td>
    </tr>
    <tr>
      <th>mainPopulationCohortIdStartDay</th>
      <td><p>The number of days relative to the mainPopulationCohortId cohort start date
to begin including visits (default=0)</p></td>
    </tr>
    <tr>
      <th>mainPopulationCohortIdEndDay</th>
      <td><p>The number of days relative to the mainPopulationCohortId cohort start date
to end including visits (default=0)</p></td>
    </tr>
    <tr>
      <th>baseSampleSize</th>
      <td><p>The maximum number of subjects in the evaluation cohort (default=2M)</p></td>
    </tr>
    <tr>
      <th>lowerAgeLimit</th>
      <td><p>The lower age for subjects in the model (default=NULL)</p></td>
    </tr>
    <tr>
      <th>upperAgeLimit</th>
      <td><p>The upper age for subjects in the model (default=NULL)</p></td>
    </tr>
    <tr>
      <th>startDays</th>
      <td><p>The days to include prior to the cohort start date (default=0)</p></td>
    </tr>
    <tr>
      <th>endDays</th>
      <td><p>The days to include after the cohort start date (default=7)</p></td>
    </tr>
    <tr>
      <th>visitLength</th>
      <td><p>The minimum length of index visit for noisy negative comparison (default=3)</p></td>
    </tr>
    <tr>
      <th>gender</th>
      <td><p>The gender(s) to be included (default c(8507, 8532))</p></td>
    </tr>
    <tr>
      <th>startDate</th>
      <td><p>The starting date for including subjects in the model (default=NULL)</p></td>
    </tr>
    <tr>
      <th>endDate</th>
      <td><p>The ending date for including subjects in the model (default=NULL)</p></td>
    </tr>
    <tr>
      <th>removeSubjectsWithFutureDates</th>
      <td><p>Should dates be checked to remove future dates (default=TRUE)</p></td>
    </tr>
    <tr>
      <th>cdmVersion</th>
      <td><p>The CDM version of the database (default=5)</p></td>
    </tr>
    <tr>
      <th>outFolder</th>
      <td><p>The folder where the output files will be written (default=working directory)</p></td>
    </tr>
    <tr>
      <th>excludeModelFromEvaluation</th>
      <td><p>Should subjects used in the model be excluded from the evaluation cohort (default = TRUE)</p></td>
    </tr>
    <tr>
      <th>savePlpData</th>
      <td><p>Should large PLP data file be saved (default=FALSE)</p></td>
    </tr>
    <tr>
      <th>createModel</th>
      <td><p>Run the function to create the diagnostic predictive model (default=TRUE)</p></td>
    </tr>
    <tr>
      <th>createEvaluationCohort</th>
      <td><p>Run the function to create the evaluation cohort (default=TRUE)</p></td>
    </tr>
    <tr>
      <th>cohortDefinitionsToTest</th>
      <td><p>A dataframe with cohorts to evaluate. Leave blank to not test any cohort definitions (default=Null)
with the format: atlasId - The cohort ID in ATLAS; atlasName - The full name of the cohort; cohortId - The cohort ID to use in the package. Usually the same as the cohort ID in ATLAS;
name - A short name for the cohort, to use to create file names. Do not use special characters; washoutPeriod - The mininum required continuous observation time prior to index date for subjects within the cohort to test</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Function to run through the complete phenotype evaluation process from model building to developing an
evaluation cohort to using the evaluation cohort to determine the performance characteristics of phenotype algorithms
for acute health conditions.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joel N. Swerdel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


